/*
 * Name     : board.min.js
 * Version  : 1.2.0
 * Author   : 1px studio
 * Date     : 2023-07-19
 * Desc     : blog board + search bug fix version. 
 * -------------------------------------------------
 */
$(function(){let t,e,a;$("#ext_search select").after('<span class="px-select"></span>'),function t(){let e="",a=[],i=[],n=window.location.search,s=new URLSearchParams(n);if($("select[name=com_board_category_code]").length){let l=s.get("com_board_category_code"),r=$("select[name=com_board_category_code]").attr("onchange").split("'")[1]+"com_board_category_code=",o="";$("select[name=com_board_category_code] option").each(function(){let t=$(this);a.push(t.text()),i.push(t.val())});for(let c=0;c<a.length;c++)e+=`<a class="button-category ${o=l?l==i[c]?"active":"":0==c?"active":""}" href="${r}${i[c]}">${a[c]}</a>`;$(".category-button-wrapper").empty().append(e)}}(),t=$("input[type=image]"),e=$("img"),a=["검색","확인","댓글작성","삭제","이동","복사","이전","목록","다음","스팸신고","수정","삭제","답변","글쓰기","작성완료","취소"],t.each(function(){let t=$(this).attr("src");t.indexOf("search.gif")>-1&&($(this).before(`<button type="submit" id="btn-search" class="button-search" value="${a[0]}"><span class="sr-only">검색</span><i class="bi bi-search"></i></button>`),$(document).on("click","#btn-search",function(){$(this).next("input[type=image]").trigger("click")}),$(this).hide()),t.indexOf("confirm.gif")>-1&&($(this).before(`<input type="submit" id="btn-confirm" class="button-b button--primary" value="${a[1]}">`),$(this).hide()),t.indexOf("comment_write.gif")>-1&&($(this).before(`<input type="submit" id="btn-comment-write" class="button-b button--primary" value="${a[2]}">`),$(document).on("click","#btn-comment-write",function(){$(this).next("input[type=image]").trigger("click")}),$(this).hide())}),e.each(function(){let t=$(this).attr("src"),e=$(this).attr("onclick");t.indexOf("btn_sdel.gif")>-1&&($(this).before(`<button class="button-b button--dark" onclick='${e}'>${a[3]}</button>`),$(this).remove()),t.indexOf("move.gif")>-1&&($(this).before(`<button class="button-b button--default" onclick='${e}'>${a[4]}</button>`),$(this).remove()),t.indexOf("copy.gif")>-1&&($(this).before(`<button class="button-b button--default" onclick='${e}'>${a[5]}</button>`),$(this).remove()),t.indexOf("/prev.gif")>-1&&$(this).parent().addClass("button-b button--default move-page").text(a[6]),t.indexOf("list.gif")>-1&&$(this).parent().addClass("button-b button--dark").text(a[7]),t.indexOf("/next.gif")>-1&&$(this).parent().addClass("button-b button--default move-page").text(a[8]),t.indexOf("spam.gif")>-1&&($(this).before(`<button class="button-b button--danger" onclick='${e}'>${a[9]}</button>`),$(this).remove()),t.indexOf("modify.gif")>-1&&$(this).parent().addClass("button-b button--default").text(a[10]),t.indexOf("delete.gif")>-1&&$(this).parent().addClass("button-b button--default").text(a[11]),t.indexOf("reply.gif")>-1&&$(this).parent().addClass("button-b button--default").text(a[12]),t.indexOf("write.gif")>-1&&$(this).parent().addClass("button-b button--dark size--3").text(a[13]),t.indexOf("btn_confirm.gif")>-1&&$(this).parent().addClass("button-b button--primary").text(a[14]),t.indexOf("cancel.gif")>-1&&$(this).parent().addClass("button-b button--default button--lg").text(a[15])}),function t(){if(!$(".board-gallery").length)return!1;let e=[],a=[],i=[],n=[],s="",l=$(".board-gallery .gallery-list").data("column")?$(".board-gallery .gallery-list").data("column"):3,r="";switch(l){case 1:r="col-xl-12";break;case 2:r="col-xl-6";break;case 3:default:r="col-xl-4";break;case 4:r="col-xl-3";break;case 5:r="col-xl-2-5";break;case 6:r="col-xl-2"}if($(".board-gallery").hasClass("type-a")){$(".board-gallery .article-wrapper > .photo-article-list > tbody > tr").each(function(){let t=$(this).find(".bbsnewf5"),s=t.find(".gallery_etc").text().split(":")[1];e.push(t.find("img").attr("src")),a.push(t.find(".gallery_subject>a").attr("href")),i.push(t.find(".gallery_title").text()),n.push(void 0==s?"":'<span class="category">'+s.replace("]","")+"</span>")}),s='<div class="row type-a mx-n2 mx-md-n3">';for(let o=0;o<e.length;o++)s+=`
                <div class="col-6 col-md-4 ${r} col-photo px-2 px-md-3">
                    <a href="${a[o]}">
                        <div class="article-card">
                            <figure>
                                <img src="${e[o]}" alt="${i[o]}">
                            </figure>
                            <div class="card-content">
                                ${n[o]}
                                <h5>${i[o]}</h5>
                            </div>
                        </div>
                    </a>
                </div>
            `;s+="</div>",$(".board-gallery .article-wrapper").empty().append(s)}else if($(".board-gallery").hasClass("type-b")){$(".board-gallery .article-wrapper > .photo-article-list > tbody > tr").each(function(){let t=$(this).find(".bbsnewf5"),s=t.find(".gallery_etc").text().split(":")[1];e.push(t.find("img").attr("src")),a.push(t.find(".gallery_subject>a").attr("href")),i.push(t.find(".gallery_title").text()),n.push(void 0==s?"":'<span class="category">'+s.replace("]","")+"</span>")}),s='<div class="row type-b mx-n2 mx-md-n3">';for(let c=0;c<e.length;c++)s+=`
                <div class="col-6 col-md-4 ${r} col-photo px-2 px-md-3">
                    <a href="${a[c]}">
                        <div class="article-card">
                            <figure>
                                <img src="${e[c]}" alt="${i[c]}">
                                <figcaption>
                                    ${n[c]}
                                    <h5>${i[c]}</h5>
                                </figcaption>
                            </figure>
                        </div>
                    </a>
                </div>
            `;s+="</div>",$(".board-gallery .article-wrapper").empty().append(s)}}(),function t(){if(!$(".faq-list .table-article-list .titdesign").length)return!1;let e=`
        <div id="ajax-loader">
            <svg version="1.1" id="L4" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
            viewBox="0 0 100 100" enable-background="new 0 0 0 0" xml:space="preserve">
            <circle fill="#dee2e6" stroke="none" cx="6" cy="50" r="6">
            <animate
                attributeName="opacity"
                dur="1s"
                values="0;1;0"
                repeatCount="indefinite"
                begin="0.1"/>    
            </circle>
            <circle fill="#dee2e6" stroke="none" cx="26" cy="50" r="6">
            <animate
                attributeName="opacity"
                dur="1s"
                values="0;1;0"
                repeatCount="indefinite" 
                begin="0.2"/>       
            </circle>
            <circle fill="#dee2e6" stroke="none" cx="46" cy="50" r="6">
            <animate
                attributeName="opacity"
                dur="1s"
                values="0;1;0"
                repeatCount="indefinite" 
                begin="0.3"/>     
            </circle>
        </svg>
    </div>
    `;$(".faq-list .table-article-list .bbsnewf5 > a").on("click",t=>{if(!$('input[name="delete_check_notice[]"]').length){t.preventDefault();let a=$(t.currentTarget),i=a.attr("href"),n="";$.ajax({url:i,method:"GET",contentType:"application/x-www-form-urlencoded;charset=euc-kr",dataType:"html",async:!1,success:function(t){n=`
                        <td class="reply-content">
                            ${$(t).find("#post_area").html()}
                        </td>
                    `,a.closest(".titdesign").hasClass("article--open")?(a.parent().siblings(".reply-content").remove(),a.closest(".titdesign").removeClass("article--open")):($(".titdesign").removeClass("article--open"),$(".reply-content").remove(),a.parent().after(n),a.closest(".titdesign").addClass("article--open"))},error:function(t){alert("오류가 발생하였습니다.")},beforeSend:function(t){t.overrideMimeType("application/x-www-form-urlencoded;charset=euc-kr"),$("body").prepend(e)},complete:function(){$("#ajax-loader").remove()}})}})}(),function t(){if(!$(".board-event").length)return!1;let e=[],a=[],i=[],n=[],s="";$(".board-event .article-wrapper > .event-article-list > tbody > tr").each(function(){let t=$(this).find(".bbsnewf5"),s=t.find(".gallery_etc").text().trim(),l=0==s.length?"":s.split(":")[1].replace(",","").replace("이벤트 종료일",""),r=0==s.length?"":s.split(":")[2].replace("]","");e.push(t.find("img").attr("src")),a.push(t.find(".gallery_subject>a").attr("href")),i.push(t.find(".gallery_title").text()),n.push(0==s.length?"":'<span class="date">'+l+" ~ "+r+"</span>")}),s='<div class="row row-event-list mx-lg-n5">';for(let l=0;l<e.length;l++)s+=`
            <div class="col-sm-6 event-item px-lg-5">
                <figure>
                    <a href="${a[l]}">
                        <img src="${e[l]}" alt="${i[l]}">
                    </a>
                </figure>
                <div class="info">
                    ${n[l]}
                    <h4>${i[l]}</h4>
                </div>
            </div>
        `;s+="</div>",$(".board-event .article-wrapper").empty().append(s)}(),function t(){if(!$(".board-blog").length)return!1;let e=[],a=[],i=[],n=[],s=[],l=[],r=[],o="";$(".board-blog .article-wrapper > .blog-article-list .webzine_type2 > tbody > tr").each(function(){let t=$(this).find(".webzine_type_text_td_left");if(0==t.length)return;let o=$(this).find(".webzine_type_img_td");e.push(t.find(".webzine_no .obj_value").text().trim()),a.push(t.find(".webzine_subject .news_title").text().trim()),i.push(t.find(".webzine_dateof_write .obj_value").text()),n.push(t.find(".webzine_category .obj_value").text().trim()),s.push(t.find(".webzine_description .obj_value").text().trim()),l.push(o.find("img").attr("src")),r.push(o.find("a").attr("href"))}),o='<div class="row blog-item">';for(let c=0;c<l.length;c++)o+=`
                <div class="row">
                    <div class="thumbnail col-lg-3 col-12">
                        <a href="${r[c]}">
                            <strong>${a[c]}</strong>
                            <img src="${l[c]}" alt="${a[c]}">
                            <div class="black-mask"></div>
                        </a>
                    </div>
                    <div class="info col-lg-9 col-12">
                        <div class="etc">
                            <span class="no">NO. ${e[c]}</span>
                            <span class="category">&#35;${n[c]}</span>
                            <span class="write-date">${i[c]}</span>
                        </div>
                        <h3><a href="${r[c]}">${a[c]}</a></h3>
                        <p>${s[c]}</p>
                    </div>
                </div>
            `;o+="</div>",$(".board-blog .article-wrapper").empty().append(o)}(),function t(){if(!$(".board-blog #post_area").length)return!1;let e=$(".board-blog .table-article-common tr"),a='<div class="post-wrap"><div class="post-head">',i;e.each(function(t){let e,n;if(i=null!==i?$(this).find("#post_area"):i,0==t)a+=`
                    <h3 class="post-title">
                        ${n=$(this).find(".board_desc").text().trim()}
                    </h3>
                    `;else{if(e=$(this).find(".board_bgcolor").text().trim(),n=$(this).find(".board_desc").text().trim(),0==e.length)return;a+=`
                    <span class="post-item">
                        <span class="item-label">${e}</span><span class="item-desc">${n}</span>
                    </span>
                    `}}),a+='</div><div class="post-body"></div></div>',$(".board-blog .table-article-common").replaceWith(a),$(".board-blog").find(".post-body").html(i);let n=$(".board-view-thumbnails").find("a"),s='<div class="post-thumb"><h4>Previous posts</h4><div class="thumb-items">';n.each(function(){let t;s+=`
                <div class="thumb-item">
                    <a href="${$(this).attr("href")}"><img src="${$(this).find("img").attr("src")}"></a>
                </div>
                `}),s+="</div></div>",$(".board-blog").find(".post-body").append(s),$(".board-view-thumbnails").remove();let l='<div class="move-page">',r=$(".board-blog .move-page");r.each(function(){let t=$(this).text().trim();l+=`<a href="${$(this).attr("href")}" class="move-btn ${"이전"==t?"prev":"next"}">${"이전"==t?'<i class="bi bi-chevron-left"></i><span class="han">이전글</span>':'<span class="han">다음글</span><i class="bi bi-chevron-right"></i>'}</a>`}),l+="</div>",r.remove(),$(".board-blog").find(".post-wrap").append(l),$(".board-blog").find(".move-btn").on("mouseover",function(){$(this).addClass("on")}),$(".board-blog").find(".move-btn").on("mouseout",function(){$(this).removeClass("on")})}(),function t(){if($(".board-blog #post_area").length)return!1;let e=$(".board-blog .table-article-common tr input[name='com_board_notice']");e.length>0&&e.closest("tr").remove()}()});